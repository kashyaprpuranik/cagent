# =============================================================================
# CoreDNS Configuration - Auto-generated from cagent.yaml
# Generated: 2026-02-19T19:14:15.156476Z
# DO NOT EDIT - changes will be overwritten
# =============================================================================

# Devbox.local aliases -> Envoy proxy (10.200.1.10)
devbox.local {
    template IN A {
        answer "{{ .Name }} 60 IN A 10.200.1.10"
    }
    template IN AAAA {
        rcode NOERROR
    }
    log
}

# Allowlisted domains
api.anthropic.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

api.botframework.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

api.deepgram.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

api.elevenlabs.io {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

api.firecrawl.dev {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

api.github.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

api.minimax.io {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

api.openai.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

api.perplexity.ai {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

api.search.brave.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

api.slack.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

api.telegram.org {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

api.x.ai {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

bot-api.zaloplatforms.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

cdn-lfs.huggingface.co {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

cdn.discordapp.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

chat.googleapis.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

chatgpt.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

claude.ai {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

codeload.github.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

discord.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

echo-server {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

files.pythonhosted.org {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

gateway.discord.gg {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

gist.githubusercontent.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

github.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

graph.microsoft.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

huggingface.co {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

login.microsoftonline.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

mmg.whatsapp.net {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

oauth2.googleapis.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

objects.githubusercontent.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

open.feishu.cn {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

openrouter.ai {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

pypi.org {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

raw.githubusercontent.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

registry.npmjs.org {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

registry.yarnpkg.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

web.whatsapp.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

wss-primary.whatsapp.net {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

www.googleapis.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

www.youtube.com {
    forward . 8.8.8.8 8.8.4.4
    cache 300
    log
}

# Internal services (Docker DNS)
backend {
    forward . 127.0.0.11
    log
}

envoy {
    forward . 127.0.0.11
    log
}

dns-filter {
    forward . 127.0.0.11
    log
}

vector {
    forward . 127.0.0.11
    log
}

# Catch-all: health, metrics, and block non-allowlisted domains
. {
    health :8080
    prometheus :9153

    log . {
        class all
    }
    errors

    # Return NXDOMAIN for non-allowlisted domains
    template ANY ANY {
        rcode NXDOMAIN
    }
}