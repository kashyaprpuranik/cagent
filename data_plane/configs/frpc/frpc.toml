# FRP Client Configuration
# Connects outbound to control plane FRP server
# Exposes SSH access to this agent via STCP (P2P tunneling)

serverAddr = "{{ .Envs.FRP_SERVER_ADDR }}"
serverPort = 7000

# Authentication (must match server)
auth.method = "token"
auth.token = "{{ .Envs.FRP_AUTH_TOKEN }}"

# Logging
log.to = "console"
log.level = "info"

# Connection settings
transport.poolCount = 2
transport.tcpMux = true

# SSH tunnel via STCP - P2P tunneling with unique secret per agent
# No exposed port needed - visitors connect through FRP server
[[proxies]]
name = "{{ .Envs.AGENT_ID }}-ssh"
type = "stcp"
localIP = "172.30.0.20"
localPort = 22
secretKey = "{{ .Envs.STCP_SECRET_KEY }}"
