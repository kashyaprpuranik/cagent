# Data Plane Environment Configuration
# Copy to .env and customize

# =============================================================================
# Operation Mode
# =============================================================================
# standalone: No control plane, use static config only (no auditing)
# connected:  Use control plane API, fall back to static config
DATAPLANE_MODE=connected

# =============================================================================
# Control Plane Connection (used in 'connected' mode)
# =============================================================================
# API token for authenticating with control plane
# Generate with: openssl rand -hex 32
# Used by: Envoy (credentials/rate-limits), warden (heartbeat)
CONTROL_PLANE_TOKEN=

# Control plane API URL
# Set to control plane machine's IP/hostname
# Example: http://192.168.1.50:8002
CONTROL_PLANE_URL=

# Warden heartbeat interval (seconds)
HEARTBEAT_INTERVAL=30

# =============================================================================
# Warden Settings
# =============================================================================
# How often warden re-syncs config from cagent.yaml / control plane (seconds)
CONFIG_SYNC_INTERVAL=300

# =============================================================================
# Local Admin UI (used with --profile admin)
# =============================================================================
# Port for the local admin web UI
LOCAL_ADMIN_PORT=8080

# =============================================================================
# Container Security
# =============================================================================
# Container runtime: runc (default) or runsc (gVisor)
# gVisor provides kernel-level isolation - syscalls never reach host kernel
# Highly recommended for running untrusted code
#
# To use gVisor:
#   1. Install: https://gvisor.dev/docs/user_guide/install/
#   2. Configure Docker: sudo runsc install && sudo systemctl restart docker
#   3. Set: CONTAINER_RUNTIME=runsc
CONTAINER_RUNTIME=runc

# =============================================================================
# Cell Configuration
# =============================================================================
# Build variant: lean, dev, or ml
# lean: Essentials only (~1.5GB)
# dev:  Essentials + Go + Rust + AWS CLI (~3GB)
# ml:   Dev + PyTorch + ML libs (~6GB)
CELL_VARIANT=lean

# SSH public key for cell access (paste your id_rsa.pub content here)
# Example: ssh-rsa AAAAB3NzaC1yc2EAAAA... user@host
SSH_AUTHORIZED_KEYS=

# =============================================================================
# Cell Resource Limits (auto-written by warden from cagent.yaml resources section)
# =============================================================================
# These are read by docker-compose.yml via ${VAR:-default} substitution.
# Warden writes them to .env when cagent.yaml changes.
# You can also set them manually here to override.
# CELL_CPU_LIMIT=2.0
# CELL_MEMORY_LIMIT=2G
# CELL_PIDS_LIMIT=256

# =============================================================================
# Environment
# =============================================================================
ENVIRONMENT=development
