# Data Plane Environment Configuration
# Copy to .env and customize

# =============================================================================
# Operation Mode
# =============================================================================
# standalone: No control plane, use static config only (no auditing)
# connected:  Use control plane API, fall back to static config
DATAPLANE_MODE=connected

# =============================================================================
# Control Plane Connection (used in 'connected' mode)
# =============================================================================
# API token for authenticating with control plane
# Generate with: openssl rand -hex 32
# Used by: Envoy (credentials/rate-limits), agent-manager (heartbeat)
CONTROL_PLANE_TOKEN=

# Control plane API URL
# Set to control plane machine's IP/hostname
# Example: http://192.168.1.50:8002
CONTROL_PLANE_URL=

# Agent manager heartbeat interval (seconds)
HEARTBEAT_INTERVAL=30

# =============================================================================
# Agent Manager Settings
# =============================================================================
# How often agent-manager re-syncs config from cagent.yaml / control plane (seconds)
CONFIG_SYNC_INTERVAL=300

# =============================================================================
# Local Admin UI (used with --profile admin)
# =============================================================================
# Port for the local admin web UI
LOCAL_ADMIN_PORT=8080

# =============================================================================
# Container Security
# =============================================================================
# Container runtime: runc (default) or runsc (gVisor)
# gVisor provides kernel-level isolation - syscalls never reach host kernel
# Highly recommended for running untrusted code
#
# To use gVisor:
#   1. Install: https://gvisor.dev/docs/user_guide/install/
#   2. Configure Docker: sudo runsc install && sudo systemctl restart docker
#   3. Set: CONTAINER_RUNTIME=runsc
CONTAINER_RUNTIME=runc

# =============================================================================
# Agent Configuration
# =============================================================================
# Build variant: lean, dev, or ml
# lean: Essentials only (~1.5GB)
# dev:  Essentials + Go + Rust + AWS CLI (~3GB)
# ml:   Dev + PyTorch + ML libs (~6GB)
AGENT_VARIANT=lean

# SSH public key for agent access (paste your id_rsa.pub content here)
# Example: ssh-rsa AAAAB3NzaC1yc2EAAAA... user@host
SSH_AUTHORIZED_KEYS=

# =============================================================================
# FRP Configuration (for SSH access via --profile ssh)
# =============================================================================
# Authentication token (must match control plane frps.toml)
FRP_AUTH_TOKEN=
# FRP server address (default: derived from CONTROL_PLANE_URL host)
# FRP_SERVER_ADDR=
# FRP server port (default: 7000)
FRP_SERVER_PORT=7000
# Note: STCP credentials are auto-provisioned from the control plane API.
# No manual setup needed â€” just set CONTROL_PLANE_URL, CONTROL_PLANE_TOKEN,
# and FRP_AUTH_TOKEN, then start with --profile ssh.

# =============================================================================
# Environment
# =============================================================================
ENVIRONMENT=development
